---

# Travis file for cookiecutter ansible role template

dist: trusty
sudo: required

language: python

env:
  - "RVM_KEY=409B6B1796C275462A1703113804BB82D39DC0E3"

before_install:
  # Make sure everything's up to date.
  - sudo apt-get update -qq

  # Install dependencies
  - sudo apt-get install python-pip python-dev curl -y

install:
  # Install python pytest plugin to cookiecutter template testing
  - sudo pip install pytest-cookies

  # Install ruby dependencies to run serverspec tests
  - >
    gpg --keyserver hkp://keys.gnupg.net --recv-keys ${RVM_KEY}
    && curl -L https://get.rvm.io | bash -s stable
    && source ~/.rvm/scripts/rvm
    && rvm install ruby
    && gem install bundle
    && gem install byebug

script:
  # Run tests
  - py.test

